// ==============================================================
// Generated by Vitis HLS v2023.1
// Copyright 1986-2022 Xilinx, Inc. All Rights Reserved.
// Copyright 2022-2023 Advanced Micro Devices, Inc. All Rights Reserved.
// ==============================================================

`timescale 1 ns / 1 ps 

module myproject_linear_array_array_ap_fixed_16_6_5_3_0_32u_linear_config3_s (
        ap_clk,
        ap_rst,
        ap_start,
        start_full_n,
        ap_done,
        ap_continue,
        ap_idle,
        ap_ready,
        start_out,
        start_write,
        layer13_out_dout,
        layer13_out_num_data_valid,
        layer13_out_fifo_cap,
        layer13_out_empty_n,
        layer13_out_read,
        layer3_out_din,
        layer3_out_num_data_valid,
        layer3_out_fifo_cap,
        layer3_out_full_n,
        layer3_out_write
);

parameter    ap_ST_fsm_state1 = 1'd1;

input   ap_clk;
input   ap_rst;
input   ap_start;
input   start_full_n;
output   ap_done;
input   ap_continue;
output   ap_idle;
output   ap_ready;
output   start_out;
output   start_write;
input  [479:0] layer13_out_dout;
input  [1:0] layer13_out_num_data_valid;
input  [1:0] layer13_out_fifo_cap;
input   layer13_out_empty_n;
output   layer13_out_read;
output  [511:0] layer3_out_din;
input  [1:0] layer3_out_num_data_valid;
input  [1:0] layer3_out_fifo_cap;
input   layer3_out_full_n;
output   layer3_out_write;

reg ap_done;
reg ap_idle;
reg start_write;
reg layer13_out_read;
reg layer3_out_write;

reg    real_start;
reg    start_once_reg;
reg    ap_done_reg;
(* fsm_encoding = "none" *) reg   [0:0] ap_CS_fsm;
wire    ap_CS_fsm_state1;
reg    internal_ap_ready;
reg    layer13_out_blk_n;
reg    layer3_out_blk_n;
reg    ap_block_state1;
wire   [14:0] trunc_ln22_fu_211_p1;
wire   [14:0] trunc_ln22_29_fu_505_p4;
wire   [14:0] trunc_ln22_30_fu_515_p4;
wire   [14:0] trunc_ln22_s_fu_215_p4;
wire   [14:0] trunc_ln22_2_fu_235_p4;
wire   [14:0] trunc_ln22_3_fu_245_p4;
wire  signed [15:0] sext_ln32_4_fu_541_p1;
wire   [30:0] tmp_5_fu_545_p3;
wire   [14:0] trunc_ln22_4_fu_255_p4;
wire  signed [31:0] sext_ln32_5_fu_553_p1;
wire   [46:0] tmp_6_fu_557_p3;
wire   [14:0] trunc_ln22_5_fu_265_p4;
wire  signed [47:0] sext_ln32_6_fu_565_p1;
wire   [62:0] tmp_7_fu_569_p3;
wire   [14:0] trunc_ln22_6_fu_275_p4;
wire  signed [63:0] sext_ln32_7_fu_577_p1;
wire   [78:0] tmp_8_fu_581_p3;
wire   [14:0] trunc_ln22_7_fu_285_p4;
wire  signed [79:0] sext_ln32_8_fu_589_p1;
wire   [94:0] tmp_9_fu_593_p3;
wire   [14:0] trunc_ln22_8_fu_295_p4;
wire  signed [95:0] sext_ln32_9_fu_601_p1;
wire   [110:0] tmp_10_fu_605_p3;
wire   [14:0] trunc_ln22_9_fu_305_p4;
wire  signed [111:0] sext_ln32_10_fu_613_p1;
wire   [126:0] tmp_11_fu_617_p3;
wire   [14:0] trunc_ln22_10_fu_315_p4;
wire  signed [127:0] sext_ln32_11_fu_625_p1;
wire   [142:0] tmp_12_fu_629_p3;
wire   [14:0] trunc_ln22_11_fu_325_p4;
wire  signed [143:0] sext_ln32_12_fu_637_p1;
wire   [158:0] tmp_13_fu_641_p3;
wire   [14:0] trunc_ln22_12_fu_335_p4;
wire  signed [159:0] sext_ln32_13_fu_649_p1;
wire   [174:0] tmp_14_fu_653_p3;
wire   [14:0] trunc_ln22_13_fu_345_p4;
wire  signed [175:0] sext_ln32_14_fu_661_p1;
wire   [190:0] tmp_15_fu_665_p3;
wire   [14:0] trunc_ln22_14_fu_355_p4;
wire  signed [191:0] sext_ln32_15_fu_673_p1;
wire   [206:0] tmp_16_fu_677_p3;
wire   [14:0] trunc_ln22_15_fu_365_p4;
wire  signed [207:0] sext_ln32_16_fu_685_p1;
wire   [222:0] tmp_17_fu_689_p3;
wire   [14:0] trunc_ln22_16_fu_375_p4;
wire  signed [223:0] sext_ln32_17_fu_697_p1;
wire   [238:0] tmp_18_fu_701_p3;
wire   [14:0] trunc_ln22_17_fu_385_p4;
wire  signed [239:0] sext_ln32_18_fu_709_p1;
wire   [254:0] tmp_19_fu_713_p3;
wire   [14:0] trunc_ln22_18_fu_395_p4;
wire  signed [255:0] sext_ln32_19_fu_721_p1;
wire   [270:0] tmp_20_fu_725_p3;
wire   [14:0] trunc_ln22_19_fu_405_p4;
wire  signed [271:0] sext_ln32_20_fu_733_p1;
wire   [286:0] tmp_21_fu_737_p3;
wire   [14:0] trunc_ln22_20_fu_415_p4;
wire  signed [287:0] sext_ln32_21_fu_745_p1;
wire   [302:0] tmp_22_fu_749_p3;
wire   [14:0] trunc_ln22_21_fu_425_p4;
wire  signed [303:0] sext_ln32_22_fu_757_p1;
wire   [318:0] tmp_23_fu_761_p3;
wire   [14:0] trunc_ln22_22_fu_435_p4;
wire  signed [319:0] sext_ln32_23_fu_769_p1;
wire   [334:0] tmp_24_fu_773_p3;
wire   [14:0] trunc_ln22_23_fu_445_p4;
wire  signed [335:0] sext_ln32_24_fu_781_p1;
wire   [350:0] tmp_25_fu_785_p3;
wire   [14:0] trunc_ln22_24_fu_455_p4;
wire  signed [351:0] sext_ln32_25_fu_793_p1;
wire   [366:0] tmp_26_fu_797_p3;
wire   [14:0] trunc_ln22_25_fu_465_p4;
wire  signed [367:0] sext_ln32_26_fu_805_p1;
wire   [382:0] tmp_27_fu_809_p3;
wire   [14:0] trunc_ln22_26_fu_475_p4;
wire  signed [383:0] sext_ln32_27_fu_817_p1;
wire   [398:0] tmp_28_fu_821_p3;
wire   [14:0] trunc_ln22_27_fu_485_p4;
wire  signed [399:0] sext_ln32_28_fu_829_p1;
wire   [414:0] tmp_29_fu_833_p3;
wire   [14:0] trunc_ln22_28_fu_495_p4;
wire  signed [415:0] sext_ln32_29_fu_841_p1;
wire   [430:0] tmp_30_fu_845_p3;
wire   [14:0] trunc_ln22_1_fu_225_p4;
wire  signed [15:0] sext_ln32_3_fu_537_p1;
wire  signed [15:0] sext_ln32_2_fu_533_p1;
wire  signed [15:0] sext_ln32_fu_529_p1;
wire  signed [431:0] sext_ln32_30_fu_853_p1;
wire  signed [15:0] sext_ln29_fu_525_p1;
wire   [510:0] tmp_31_fu_857_p7;
reg   [0:0] ap_NS_fsm;
reg    ap_ST_fsm_state1_blk;
wire    ap_ce_reg;

// power-on initialization
initial begin
#0 start_once_reg = 1'b0;
#0 ap_done_reg = 1'b0;
#0 ap_CS_fsm = 1'd1;
end

always @ (posedge ap_clk) begin
    if (ap_rst == 1'b1) begin
        ap_CS_fsm <= ap_ST_fsm_state1;
    end else begin
        ap_CS_fsm <= ap_NS_fsm;
    end
end

always @ (posedge ap_clk) begin
    if (ap_rst == 1'b1) begin
        ap_done_reg <= 1'b0;
    end else begin
        if ((ap_continue == 1'b1)) begin
            ap_done_reg <= 1'b0;
        end else if ((~((real_start == 1'b0) | (layer3_out_full_n == 1'b0) | (layer13_out_empty_n == 1'b0) | (ap_done_reg == 1'b1)) & (1'b1 == ap_CS_fsm_state1))) begin
            ap_done_reg <= 1'b1;
        end
    end
end

always @ (posedge ap_clk) begin
    if (ap_rst == 1'b1) begin
        start_once_reg <= 1'b0;
    end else begin
        if (((real_start == 1'b1) & (internal_ap_ready == 1'b0))) begin
            start_once_reg <= 1'b1;
        end else if ((internal_ap_ready == 1'b1)) begin
            start_once_reg <= 1'b0;
        end
    end
end

always @ (*) begin
    if (((real_start == 1'b0) | (layer3_out_full_n == 1'b0) | (layer13_out_empty_n == 1'b0) | (ap_done_reg == 1'b1))) begin
        ap_ST_fsm_state1_blk = 1'b1;
    end else begin
        ap_ST_fsm_state1_blk = 1'b0;
    end
end

always @ (*) begin
    if ((~((real_start == 1'b0) | (layer3_out_full_n == 1'b0) | (layer13_out_empty_n == 1'b0) | (ap_done_reg == 1'b1)) & (1'b1 == ap_CS_fsm_state1))) begin
        ap_done = 1'b1;
    end else begin
        ap_done = ap_done_reg;
    end
end

always @ (*) begin
    if (((real_start == 1'b0) & (1'b1 == ap_CS_fsm_state1))) begin
        ap_idle = 1'b1;
    end else begin
        ap_idle = 1'b0;
    end
end

always @ (*) begin
    if ((~((real_start == 1'b0) | (layer3_out_full_n == 1'b0) | (layer13_out_empty_n == 1'b0) | (ap_done_reg == 1'b1)) & (1'b1 == ap_CS_fsm_state1))) begin
        internal_ap_ready = 1'b1;
    end else begin
        internal_ap_ready = 1'b0;
    end
end

always @ (*) begin
    if ((~((real_start == 1'b0) | (ap_done_reg == 1'b1)) & (1'b1 == ap_CS_fsm_state1))) begin
        layer13_out_blk_n = layer13_out_empty_n;
    end else begin
        layer13_out_blk_n = 1'b1;
    end
end

always @ (*) begin
    if ((~((real_start == 1'b0) | (layer3_out_full_n == 1'b0) | (layer13_out_empty_n == 1'b0) | (ap_done_reg == 1'b1)) & (1'b1 == ap_CS_fsm_state1))) begin
        layer13_out_read = 1'b1;
    end else begin
        layer13_out_read = 1'b0;
    end
end

always @ (*) begin
    if ((~((real_start == 1'b0) | (ap_done_reg == 1'b1)) & (1'b1 == ap_CS_fsm_state1))) begin
        layer3_out_blk_n = layer3_out_full_n;
    end else begin
        layer3_out_blk_n = 1'b1;
    end
end

always @ (*) begin
    if ((~((real_start == 1'b0) | (layer3_out_full_n == 1'b0) | (layer13_out_empty_n == 1'b0) | (ap_done_reg == 1'b1)) & (1'b1 == ap_CS_fsm_state1))) begin
        layer3_out_write = 1'b1;
    end else begin
        layer3_out_write = 1'b0;
    end
end

always @ (*) begin
    if (((start_full_n == 1'b0) & (start_once_reg == 1'b0))) begin
        real_start = 1'b0;
    end else begin
        real_start = ap_start;
    end
end

always @ (*) begin
    if (((real_start == 1'b1) & (start_once_reg == 1'b0))) begin
        start_write = 1'b1;
    end else begin
        start_write = 1'b0;
    end
end

always @ (*) begin
    case (ap_CS_fsm)
        ap_ST_fsm_state1 : begin
            ap_NS_fsm = ap_ST_fsm_state1;
        end
        default : begin
            ap_NS_fsm = 'bx;
        end
    endcase
end

assign ap_CS_fsm_state1 = ap_CS_fsm[32'd0];

always @ (*) begin
    ap_block_state1 = ((real_start == 1'b0) | (layer3_out_full_n == 1'b0) | (layer13_out_empty_n == 1'b0) | (ap_done_reg == 1'b1));
end

assign ap_ready = internal_ap_ready;

assign layer3_out_din = $signed(tmp_31_fu_857_p7);

assign sext_ln29_fu_525_p1 = $signed(trunc_ln22_fu_211_p1);

assign sext_ln32_10_fu_613_p1 = $signed(tmp_10_fu_605_p3);

assign sext_ln32_11_fu_625_p1 = $signed(tmp_11_fu_617_p3);

assign sext_ln32_12_fu_637_p1 = $signed(tmp_12_fu_629_p3);

assign sext_ln32_13_fu_649_p1 = $signed(tmp_13_fu_641_p3);

assign sext_ln32_14_fu_661_p1 = $signed(tmp_14_fu_653_p3);

assign sext_ln32_15_fu_673_p1 = $signed(tmp_15_fu_665_p3);

assign sext_ln32_16_fu_685_p1 = $signed(tmp_16_fu_677_p3);

assign sext_ln32_17_fu_697_p1 = $signed(tmp_17_fu_689_p3);

assign sext_ln32_18_fu_709_p1 = $signed(tmp_18_fu_701_p3);

assign sext_ln32_19_fu_721_p1 = $signed(tmp_19_fu_713_p3);

assign sext_ln32_20_fu_733_p1 = $signed(tmp_20_fu_725_p3);

assign sext_ln32_21_fu_745_p1 = $signed(tmp_21_fu_737_p3);

assign sext_ln32_22_fu_757_p1 = $signed(tmp_22_fu_749_p3);

assign sext_ln32_23_fu_769_p1 = $signed(tmp_23_fu_761_p3);

assign sext_ln32_24_fu_781_p1 = $signed(tmp_24_fu_773_p3);

assign sext_ln32_25_fu_793_p1 = $signed(tmp_25_fu_785_p3);

assign sext_ln32_26_fu_805_p1 = $signed(tmp_26_fu_797_p3);

assign sext_ln32_27_fu_817_p1 = $signed(tmp_27_fu_809_p3);

assign sext_ln32_28_fu_829_p1 = $signed(tmp_28_fu_821_p3);

assign sext_ln32_29_fu_841_p1 = $signed(tmp_29_fu_833_p3);

assign sext_ln32_2_fu_533_p1 = $signed(trunc_ln22_30_fu_515_p4);

assign sext_ln32_30_fu_853_p1 = $signed(tmp_30_fu_845_p3);

assign sext_ln32_3_fu_537_p1 = $signed(trunc_ln22_s_fu_215_p4);

assign sext_ln32_4_fu_541_p1 = $signed(trunc_ln22_2_fu_235_p4);

assign sext_ln32_5_fu_553_p1 = $signed(tmp_5_fu_545_p3);

assign sext_ln32_6_fu_565_p1 = $signed(tmp_6_fu_557_p3);

assign sext_ln32_7_fu_577_p1 = $signed(tmp_7_fu_569_p3);

assign sext_ln32_8_fu_589_p1 = $signed(tmp_8_fu_581_p3);

assign sext_ln32_9_fu_601_p1 = $signed(tmp_9_fu_593_p3);

assign sext_ln32_fu_529_p1 = $signed(trunc_ln22_29_fu_505_p4);

assign start_out = real_start;

assign tmp_10_fu_605_p3 = {{trunc_ln22_8_fu_295_p4}, {sext_ln32_9_fu_601_p1}};

assign tmp_11_fu_617_p3 = {{trunc_ln22_9_fu_305_p4}, {sext_ln32_10_fu_613_p1}};

assign tmp_12_fu_629_p3 = {{trunc_ln22_10_fu_315_p4}, {sext_ln32_11_fu_625_p1}};

assign tmp_13_fu_641_p3 = {{trunc_ln22_11_fu_325_p4}, {sext_ln32_12_fu_637_p1}};

assign tmp_14_fu_653_p3 = {{trunc_ln22_12_fu_335_p4}, {sext_ln32_13_fu_649_p1}};

assign tmp_15_fu_665_p3 = {{trunc_ln22_13_fu_345_p4}, {sext_ln32_14_fu_661_p1}};

assign tmp_16_fu_677_p3 = {{trunc_ln22_14_fu_355_p4}, {sext_ln32_15_fu_673_p1}};

assign tmp_17_fu_689_p3 = {{trunc_ln22_15_fu_365_p4}, {sext_ln32_16_fu_685_p1}};

assign tmp_18_fu_701_p3 = {{trunc_ln22_16_fu_375_p4}, {sext_ln32_17_fu_697_p1}};

assign tmp_19_fu_713_p3 = {{trunc_ln22_17_fu_385_p4}, {sext_ln32_18_fu_709_p1}};

assign tmp_20_fu_725_p3 = {{trunc_ln22_18_fu_395_p4}, {sext_ln32_19_fu_721_p1}};

assign tmp_21_fu_737_p3 = {{trunc_ln22_19_fu_405_p4}, {sext_ln32_20_fu_733_p1}};

assign tmp_22_fu_749_p3 = {{trunc_ln22_20_fu_415_p4}, {sext_ln32_21_fu_745_p1}};

assign tmp_23_fu_761_p3 = {{trunc_ln22_21_fu_425_p4}, {sext_ln32_22_fu_757_p1}};

assign tmp_24_fu_773_p3 = {{trunc_ln22_22_fu_435_p4}, {sext_ln32_23_fu_769_p1}};

assign tmp_25_fu_785_p3 = {{trunc_ln22_23_fu_445_p4}, {sext_ln32_24_fu_781_p1}};

assign tmp_26_fu_797_p3 = {{trunc_ln22_24_fu_455_p4}, {sext_ln32_25_fu_793_p1}};

assign tmp_27_fu_809_p3 = {{trunc_ln22_25_fu_465_p4}, {sext_ln32_26_fu_805_p1}};

assign tmp_28_fu_821_p3 = {{trunc_ln22_26_fu_475_p4}, {sext_ln32_27_fu_817_p1}};

assign tmp_29_fu_833_p3 = {{trunc_ln22_27_fu_485_p4}, {sext_ln32_28_fu_829_p1}};

assign tmp_30_fu_845_p3 = {{trunc_ln22_28_fu_495_p4}, {sext_ln32_29_fu_841_p1}};

assign tmp_31_fu_857_p7 = {{{{{{trunc_ln22_1_fu_225_p4}, {sext_ln32_3_fu_537_p1}}, {sext_ln32_2_fu_533_p1}}, {sext_ln32_fu_529_p1}}, {sext_ln32_30_fu_853_p1}}, {sext_ln29_fu_525_p1}};

assign tmp_5_fu_545_p3 = {{trunc_ln22_3_fu_245_p4}, {sext_ln32_4_fu_541_p1}};

assign tmp_6_fu_557_p3 = {{trunc_ln22_4_fu_255_p4}, {sext_ln32_5_fu_553_p1}};

assign tmp_7_fu_569_p3 = {{trunc_ln22_5_fu_265_p4}, {sext_ln32_6_fu_565_p1}};

assign tmp_8_fu_581_p3 = {{trunc_ln22_6_fu_275_p4}, {sext_ln32_7_fu_577_p1}};

assign tmp_9_fu_593_p3 = {{trunc_ln22_7_fu_285_p4}, {sext_ln32_8_fu_589_p1}};

assign trunc_ln22_10_fu_315_p4 = {{layer13_out_dout[149:135]}};

assign trunc_ln22_11_fu_325_p4 = {{layer13_out_dout[164:150]}};

assign trunc_ln22_12_fu_335_p4 = {{layer13_out_dout[179:165]}};

assign trunc_ln22_13_fu_345_p4 = {{layer13_out_dout[194:180]}};

assign trunc_ln22_14_fu_355_p4 = {{layer13_out_dout[209:195]}};

assign trunc_ln22_15_fu_365_p4 = {{layer13_out_dout[224:210]}};

assign trunc_ln22_16_fu_375_p4 = {{layer13_out_dout[239:225]}};

assign trunc_ln22_17_fu_385_p4 = {{layer13_out_dout[254:240]}};

assign trunc_ln22_18_fu_395_p4 = {{layer13_out_dout[269:255]}};

assign trunc_ln22_19_fu_405_p4 = {{layer13_out_dout[284:270]}};

assign trunc_ln22_1_fu_225_p4 = {{layer13_out_dout[479:465]}};

assign trunc_ln22_20_fu_415_p4 = {{layer13_out_dout[299:285]}};

assign trunc_ln22_21_fu_425_p4 = {{layer13_out_dout[314:300]}};

assign trunc_ln22_22_fu_435_p4 = {{layer13_out_dout[329:315]}};

assign trunc_ln22_23_fu_445_p4 = {{layer13_out_dout[344:330]}};

assign trunc_ln22_24_fu_455_p4 = {{layer13_out_dout[359:345]}};

assign trunc_ln22_25_fu_465_p4 = {{layer13_out_dout[374:360]}};

assign trunc_ln22_26_fu_475_p4 = {{layer13_out_dout[389:375]}};

assign trunc_ln22_27_fu_485_p4 = {{layer13_out_dout[404:390]}};

assign trunc_ln22_28_fu_495_p4 = {{layer13_out_dout[419:405]}};

assign trunc_ln22_29_fu_505_p4 = {{layer13_out_dout[434:420]}};

assign trunc_ln22_2_fu_235_p4 = {{layer13_out_dout[29:15]}};

assign trunc_ln22_30_fu_515_p4 = {{layer13_out_dout[449:435]}};

assign trunc_ln22_3_fu_245_p4 = {{layer13_out_dout[44:30]}};

assign trunc_ln22_4_fu_255_p4 = {{layer13_out_dout[59:45]}};

assign trunc_ln22_5_fu_265_p4 = {{layer13_out_dout[74:60]}};

assign trunc_ln22_6_fu_275_p4 = {{layer13_out_dout[89:75]}};

assign trunc_ln22_7_fu_285_p4 = {{layer13_out_dout[104:90]}};

assign trunc_ln22_8_fu_295_p4 = {{layer13_out_dout[119:105]}};

assign trunc_ln22_9_fu_305_p4 = {{layer13_out_dout[134:120]}};

assign trunc_ln22_fu_211_p1 = layer13_out_dout[14:0];

assign trunc_ln22_s_fu_215_p4 = {{layer13_out_dout[464:450]}};

endmodule //myproject_linear_array_array_ap_fixed_16_6_5_3_0_32u_linear_config3_s
